<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DCA Personality Test</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <header>
    <nav class="navbar navbar-expand-xl navbar-light" id="navbar">
      <div class="container">
        <a class="navbar-brand" href="https://digitalcareers.academy/"><img src="https://digitalcareers.academy/static/old/assets/images/dcasvg-logo.svg" height="60" /></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link mx-2 active" aria-current="page" href="https://digitalcareers.academy/">Home</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <main class="py-5 container d-flex align-items-center justify-content-center">
    <section class="tie-container d-flex py-5 justify-content-center">
      <div class="flex-column">
        <figure>
          <img src="wink.gif" alt="emoji wink">
          <h4>Well Done!</h4>
          <div class="x-container">
            <p class="text">There is a tie between the following courses:</p>
            <p class="tied-courses">

            </p>
            <p class="text text2">Do you want to contact a Course Advisor for further deliberations?</p>
          </div>
          <div class="button-container mx-auto">
            <a href="../index.html"><button type="button" class="btn btn-trans">Return to homepage</button></a>
            <button type="button" class="btn" onclick="contactAdvisor()">Contact Course Advisor</button>
          </div>
        </figure>
      </div>
    </section>
  </main>


  <footer id="footer" class="py-5">
    <div class="container">
      <section class="row mb-8">
        <div class="col-lg-3">
          <address>
            Office Address: <br />
            BOS House, <br />
            Olden way Business Park, <br />
            Ballybrit Galway, H91 E65V, Ireland
          </address>
        </div>
        <div class="col-lg-3">
          <h5>Program Track</h5>
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="https://digitalcareers.academy/scrum">Practical Scrum Master</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://digitalcareers.academy/business">Practical Business Analysis</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://digitalcareers.academy/data-analytics">Data Analytics</a>
            </li>
          </ul>
        </div>
        <div class="col-lg-3">
          <h5>Resources</h5>
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="https://digitalcareers.academy/faqs">FAQs</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://digitalcareers.academy/blog">Blog</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://digitalcareers.academy/privacy-notice">Privacy</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://digitalcareers.academy/terms">Terms and Conditions</a>
            </li>
          </ul>
        </div>
        <div class="col-lg-3">
          <h5>Get In Touch</h5>
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="https://digitalcareers.academy/contact">Contact Us</a>
            </li>
            <li>Whatsapp</li>
            <!-- New Changes -->
            <li>
              <img src="uk.png" alt="Uk Flag" width="24" />
              <a class="text-white" href="https://wa.link/ybvz0x" target="_blank">+447488818292</a>
            </li>
            <li>
              <img src="canada.png" alt="Canada Flag" width="24" />
              <a class="text-white" href="https://wa.link/8gyj2u" target="_blank">+15873303085</a>
            </li>
          </ul>
        </div>
      </section>
      <section class="border-tb d-flex justify-content-between">
        <span class="align-self-center">Â© 2024 Digital Careers Academy</span>
        <div class="social-icon">
          <a href="https://www.facebook.com/digitalcareersacademyDCA">
            <img src="facebook.png" alt="Facebook Icon" />
          </a>
          <a href="https://img.icons8.com/?size=1x&id=63306&format=png">
            <img src="twitter.png" alt="Twitter Icon" />
          </a>
          <a href="https://www.linkedin.com/company/digitalcareersacademydca">
            <img src="linkedin.png" alt="LinkedIn Icon" />
          </a>
          <a href="https://www.instagram.com/digitalcareersacademy/">
            <img src="instagram.png" alt="Instagram Icon" />
          </a>
        </div>
      </section>
    </div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Function to retrieve query parameters from URL
    function getUrlParameter(name) {
      name = name.replace(/[[]/, '\\[').replace(/[\]]/, '\\]');
      const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
      const results = regex.exec(location.search);
      return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
    }

    // Retrieve tied courses from URL parameter and populate on the page
    const tiedCoursesParam = getUrlParameter('courses');
    const tiedCoursesElement = document.querySelector('.tied-courses');

    if (tiedCoursesElement) {
      const tiedCourses = tiedCoursesParam.split(',');
      tiedCourses.forEach(course => {
        const courseElement = document.createElement('p');
        courseElement.textContent = course;
        tiedCoursesElement.appendChild(courseElement);
      });
    }

    function contactAdvisor() {
      function getEmailFromSessionStorage() {
        const userEmail = sessionStorage.getItem('userEmail');
        return userEmail;
      }

      function getFirstNameFromSessionStorage() {
        const userFirstName = sessionStorage.getItem('userFirstName');
        return userFirstName;
      }

      function getLastFromSessionStorage() {
        const userLastName = sessionStorage.getItem('userLastName');
        return userLastName;
      }
      const fullName = getFirstNameFromSessionStorage() + ' ' + getLastFromSessionStorage();
      const emailAddress = getEmailFromSessionStorage();

      // Prepare data to send to server
      const data = {
        fullName: fullName,
        emailAddress: emailAddress,
        tiedCourses: tiedCoursesParam
      };

      // Send POST request to server to send email
      fetch('https://dca-server-jwcj.onrender.com/sendAdvisorEmail', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data),
        })
        .then(response => {
          if (response.ok) {
            window.location.href = 'success.html';
          } else {
            throw new Error('Failed to send email.');
          }
        })
        .catch(error => {
          console.error('Error sending email:', error);
          alert('Failed to send email. Please try again later.');
        });
    }
  </script>
</body>

</html>